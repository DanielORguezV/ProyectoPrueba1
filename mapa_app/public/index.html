<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Visor de Mapas</title>

  <!-- Estilos y librer칤as de Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet-kmz/dist/leaflet-kmz.js"></script>

  <!-- Leaflet Search -->
  <link rel="stylesheet" href="\vendor\leaflet-search\leaflet-search.min.css"/>
   <script src="\vendor\leaflet-search\leaflet-search.min.js"></script>

   <!-- <script src="\vendor\googlemutant\Leaflet.GoogleMutant.js"></script> -->
  
  <style>
    html, body {
      margin: 0;
      padding: 0;
      display: flex;
      width: 100%;
      height: 100%;       /* p치gina ocupa todo el alto */
      font-family: Arial, sans-serif;
    }

    #sidebar {
      flex: 0 0 20%;
      background: #f8f9fa;
      padding: 0;
      display: flex;
      flex-direction: column;
      box-shadow: 2px 0 5px rgba(0,0,0,0.15);
      overflow-y: auto;
    }

    #map {
      flex: 1;
      height: 100vh;   /* 游댠 altura completa del mapa */
      position: relative;
    }

    /* Estilo de pesta침as */
    .tab-header {
      display: flex;
      background: #e9ecef;
      border-bottom: 1px solid #ccc;
    }

    .tab-header button {
      flex: 1;
      padding: 10px;
      border: none;
      background: #e9ecef;
      cursor: pointer;
      font-weight: bold;
      color: #333;
      transition: background 0.2s;
    }

    .tab-header button:hover {
      background: #dee2e6;
    }

    .tab-header button.active {
      background: #adb5bd;
      color: #fff;
    }

    .tab-content {
      flex: 1;
      padding: 15px;
    }

    .tab-pane { display: none; }
    .tab-pane.active { display: block; }

    h3 { margin-top: 15px; margin-bottom: 10px; }
    input, textarea, button {
      width: 100%;
      margin-bottom: 8px;
      padding: 6px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      background: #495057;
      color: #fff;
      border: none;
      cursor: pointer;
    }
    button:hover { background: #343a40; }

    /* --- Barra de b칰squeda sobre el mapa --- */
    #search-container {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1000;
      display: flex;
      background-color: white;
      border-radius: 5px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    }

    #searchInput {
      width: 300px;
      padding: 10px;
      border: none;
      border-radius: 5px 0 0 5px;
      outline: none;
    }

    #searchButton {
      padding: 10px 15px;
      border: none;
      background-color: #007bff;
      color: white;
      cursor: pointer;
      border-radius: 0 5px 5px 0;
    }

    #searchButton:hover { background-color: #0056b3; }
  </style>
</head>
<body>
  <!-- Sidebar con pesta침as -->
  <div id="sidebar">
    <div class="tab-header">
      <button class="active" onclick="openTab(event, 'tab1')">Pesta침a 1</button>
      <button onclick="openTab(event, 'tab2')">Pesta침a 2</button>
      <button onclick="openTab(event, 'tab3')">Pesta침a 3</button>
      <button onclick="openTab(event, 'tab4')">Pesta침a 4</button>
      <button onclick="openTab(event, 'tab5')">Pesta침a 5</button>
    </div>

    <div class="tab-content">
      <!-- Pesta침a 1 -->
      <div id="tab1" class="tab-pane active">
        <h3>1. Agregar punto</h3>
        <form id="formPunto">
          <input type="text" name="nombre" placeholder="Nombre"><br>
          <textarea name="descripcion" placeholder="Descripci칩n"></textarea><br>
          <textarea name="observaciones" placeholder="Observaciones"></textarea><br>
          <input type="text" name="lat" placeholder="Latitud"><br>
          <input type="text" name="lng" placeholder="Longitud"><br>
          <input type="text" name="imagen" placeholder="URL Imagen"><br>
          <input type="text" name="capa" placeholder="Capa"><br>
          <button type="submit">Guardar punto</button>
        </form>

        <h3>2. Subir capa KMZ/KML</h3>
        <input type="file" id="fileUpload">
        <button onclick="uploadLayer()">Subir</button>
      </div>

      <!-- Pesta침a 2 -->
      <div id="tab2" class="tab-pane">
        <h3>3. Ver mapas de calor</h3>
        <button onclick="showHeatmap()">Generar Heatmap</button>

        <h3>4. Elegir capas</h3>
        <div id="listaCapas"></div>
      </div>

      <!-- Pesta침a 3 -->
      <div id="tab3" class="tab-pane">
        <h3>5. Gesti칩n de usuarios</h3>
        <form id="formUsuario">
          <input type="text" name="nombre" placeholder="Nombre"><br>
          <input type="email" name="email" placeholder="Email"><br>
          <input type="password" name="password" placeholder="Contrase침a"><br>
          <button type="submit">Crear usuario</button>
        </form>
      </div>

      <!-- Pesta침a 4 -->
      <div id="tab4" class="tab-pane">
        <p>Contenido de la pesta침a 4 (vac칤o por ahora).</p>
      </div>

      <!-- Pesta침a 5 -->
      <div id="tab5" class="tab-pane">
        <p>Contenido de la pesta침a 5 (vac칤o por ahora).</p>
      </div>
    </div>
  </div>

  <!-- Contenedor del mapa -->
  <div id="map"></div>

  <!-- Barra de b칰squeda flotante -->
  <div id="search-container">
    <input type="text" id="searchInput" placeholder="Buscar direcci칩n o coordenadas...">
    <button id="searchButton">Buscar</button>
  </div>

  <!-- Scripts -->
  <script src="js/app.js"></script>
  <script>
    // Control de pesta침as
    function openTab(evt, tabId) {
      document.querySelectorAll('.tab-pane').forEach(pane => pane.classList.remove('active'));
      document.querySelectorAll('.tab-header button').forEach(btn => btn.classList.remove('active'));
      document.getElementById(tabId).classList.add('active');
      evt.currentTarget.classList.add('active');
    }
  </script>
</body>
</html>
